{"remainingRequest":"/Users/weiweiwei/code/projects/init-admin/node_modules/babel-loader/lib/index.js!/Users/weiweiwei/code/projects/init-admin/src/store/modules/user.js","dependencies":[{"path":"/Users/weiweiwei/code/projects/init-admin/src/store/modules/user.js","mtime":1691161506495},{"path":"/Users/weiweiwei/code/projects/init-admin/babel.config.js","mtime":1690970233489},{"path":"/Users/weiweiwei/code/projects/init-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weiweiwei/code/projects/init-admin/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgbG9nb3V0IGFzIF9sb2dvdXQsIGdldEluZm8gYXMgX2dldEluZm8gfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHNldFRva2VuLCByZW1vdmVUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCB7IHJlc2V0Um91dGVyIH0gZnJvbSAnQC9yb3V0ZXInOwp2YXIgZ2V0RGVmYXVsdFN0YXRlID0gZnVuY3Rpb24gZ2V0RGVmYXVsdFN0YXRlKCkgewogIHJldHVybiB7CiAgICB1c2VySW5mbzoge30sCiAgICB0b2tlbjogZ2V0VG9rZW4oKSwKICAgIG5hbWU6ICcnLAogICAgYXZhdGFyOiAnJywKICAgIGF1dGhzOiBbXQogIH07Cn07CnZhciBzdGF0ZSA9IGdldERlZmF1bHRTdGF0ZSgpOwp2YXIgbXV0YXRpb25zID0gewogIFJFU0VUX1NUQVRFOiBmdW5jdGlvbiBSRVNFVF9TVEFURShzdGF0ZSkgewogICAgT2JqZWN0LmFzc2lnbihzdGF0ZSwgZ2V0RGVmYXVsdFN0YXRlKCkpOwogIH0sCiAgU0VUX1VTRVJJTkZPOiBmdW5jdGlvbiBTRVRfVVNFUklORk8oc3RhdGUsIGluZm8pIHsKICAgIHN0YXRlLnVzZXJJbmZvID0gaW5mbzsKICB9LAogIFNFVF9UT0tFTjogZnVuY3Rpb24gU0VUX1RPS0VOKHN0YXRlLCB0b2tlbikgewogICAgc3RhdGUudG9rZW4gPSB0b2tlbjsKICB9LAogIFNFVF9OQU1FOiBmdW5jdGlvbiBTRVRfTkFNRShzdGF0ZSwgbmFtZSkgewogICAgc3RhdGUubmFtZSA9IG5hbWU7CiAgfSwKICBTRVRfQVZBVEFSOiBmdW5jdGlvbiBTRVRfQVZBVEFSKHN0YXRlLCBhdmF0YXIpIHsKICAgIHN0YXRlLmF2YXRhciA9IGF2YXRhcjsKICB9LAogIFNFVF9BVVRIUzogZnVuY3Rpb24gU0VUX0FVVEhTKHN0YXRlLCBhdXRocykgewogICAgc3RhdGUuYXV0aHMgPSBhdXRoczsKICB9Cn07CnZhciBhY3Rpb25zID0gewogIC8vIHVzZXIgbG9naW4KICBsb2dpbjogZnVuY3Rpb24gbG9naW4oX3JlZiwgdXNlckluZm8pIHsKICAgIHZhciBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgIHZhciBhY2NvdW50ID0gdXNlckluZm8uYWNjb3VudCwKICAgICAgcGFzc3dvcmQgPSB1c2VySW5mby5wYXNzd29yZDsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9sb2dpbih7CiAgICAgICAgYWNjb3VudDogYWNjb3VudC50cmltKCksCiAgICAgICAgcGFzc3dvcmQ6IHBhc3N3b3JkCiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgZGF0YS50b2tlbik7CiAgICAgICAgc2V0VG9rZW4oZGF0YS50b2tlbik7CiAgICAgICAgcmVzb2x2ZSgpOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gZ2V0IHVzZXIgaW5mbwogIGdldEluZm86IGZ1bmN0aW9uIGdldEluZm8oX3JlZjIpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICBfZ2V0SW5mbyhzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgICByZWplY3QoJ+mqjOivgeWksei0pe+8jOivt+mHjeaWsOeZu+W9leOAgicpOwogICAgICAgIH0KICAgICAgICB2YXIgdXNlckluZm8gPSBkYXRhLnVzZXJJbmZvOwogICAgICAgIHZhciBhdXRocyA9IHVzZXJJbmZvLmF1dGhzLAogICAgICAgICAgbmFtZSA9IHVzZXJJbmZvLm5hbWUsCiAgICAgICAgICBhdmF0YXIgPSB1c2VySW5mby5hdmF0YXI7CiAgICAgICAgaWYgKCFhdXRocyB8fCBhdXRocy5sZW5ndGggPD0gMCkgewogICAgICAgICAgcmVqZWN0KCflvZPliY3nlKjmiLfmmoLml6Dku7vkvZXmnYPpmZAhJyk7CiAgICAgICAgfQogICAgICAgIGNvbW1pdCgnU0VUX0FVVEhTJywgYXV0aHMpOwogICAgICAgIGNvbW1pdCgnU0VUX05BTUUnLCBuYW1lKTsKICAgICAgICBjb21taXQoJ1NFVF9BVkFUQVInLCBhdmF0YXIpOwogICAgICAgIGNvbW1pdCgnU0VUX1VTRVJJTkZPJywgdXNlckluZm8pOwogICAgICAgIHJlc29sdmUodXNlckluZm8pOwogICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICByZWplY3QoZXJyb3IpOwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgLy8gdXNlciBsb2dvdXQKICBsb2dvdXQ6IGZ1bmN0aW9uIGxvZ291dChfcmVmMykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9sb2dvdXQoc3RhdGUudG9rZW4pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHJlbW92ZVRva2VuKCk7IC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKICAgICAgICByZXNldFJvdXRlcigpOwogICAgICAgIGNvbW1pdCgnUkVTRVRfU1RBVEUnKTsKICAgICAgICBjb21taXQoJ1NFVF9BVVRIUycsIFtdKTsKICAgICAgICBjb21taXQoJ1NFVF9UT0tFTicsICcnKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyByZW1vdmUgdG9rZW4KICByZXNldFRva2VuOiBmdW5jdGlvbiByZXNldFRva2VuKF9yZWY0KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjQuY29tbWl0OwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgIHJlbW92ZVRva2VuKCk7IC8vIG11c3QgcmVtb3ZlICB0b2tlbiAgZmlyc3QKICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICBjb21taXQoJ1NFVF9BVVRIUycsIFtdKTsKICAgICAgcmVzb2x2ZSgpOwogICAgfSk7CiAgfQp9OwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogc3RhdGUsCiAgbXV0YXRpb25zOiBtdXRhdGlvbnMsCiAgYWN0aW9uczogYWN0aW9ucwp9Ow=="},{"version":3,"names":["login","logout","getInfo","getToken","setToken","removeToken","resetRouter","getDefaultState","userInfo","token","name","avatar","auths","state","mutations","RESET_STATE","Object","assign","SET_USERINFO","info","SET_TOKEN","SET_NAME","SET_AVATAR","SET_AUTHS","actions","_ref","commit","account","password","Promise","resolve","reject","trim","then","response","data","catch","error","_ref2","length","_ref3","resetToken","_ref4","namespaced"],"sources":["/Users/weiweiwei/code/projects/init-admin/src/store/modules/user.js"],"sourcesContent":["import { login, logout, getInfo } from '@/api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport { resetRouter } from '@/router'\n\nconst getDefaultState = () => {\n  return {\n    userInfo: {},\n    token: getToken(),\n    name: '',\n    avatar: '',\n    auths: []\n  }\n}\n\nconst state = getDefaultState()\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_USERINFO: (state, info) => {\n    state.userInfo = info\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_AUTHS: (state, auths) => {\n    state.auths = auths\n  },\n}\n\nconst actions = {\n  // user login\n  login({ commit }, userInfo) {\n    const { account, password } = userInfo\n    return new Promise((resolve, reject) => {\n      login({ account: account.trim(), password: password }).then(response => {\n        const { data } = response\n        commit('SET_TOKEN', data.token)\n        setToken(data.token)\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        const { data } = response\n\n        if (!data) {\n          reject('验证失败，请重新登录。')\n        }\n\n        const userInfo =  data.userInfo\n       \n        const { auths, name, avatar } = userInfo\n\n        if (!auths || auths.length <= 0) {\n          reject('当前用户暂无任何权限!')\n        }\n\n        commit('SET_AUTHS', auths)\n        commit('SET_NAME', name)\n        commit('SET_AVATAR', avatar)\n        commit('SET_USERINFO', userInfo)\n        \n        resolve(userInfo)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      logout(state.token).then(() => {\n        removeToken() // must remove  token  first\n        resetRouter()\n        commit('RESET_STATE')\n        commit('SET_AUTHS', [])\n        commit('SET_TOKEN', '')\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken() // must remove  token  first\n      commit('RESET_STATE')\n      commit('SET_AUTHS', [])\n      \n      resolve()\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n"],"mappings":"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"}]}