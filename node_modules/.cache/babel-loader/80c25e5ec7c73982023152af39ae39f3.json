{"remainingRequest":"/Users/weiweiwei/code/projects/init-admin/node_modules/babel-loader/lib/index.js!/Users/weiweiwei/code/projects/init-admin/src/store/modules/permission.js","dependencies":[{"path":"/Users/weiweiwei/code/projects/init-admin/src/store/modules/permission.js","mtime":1691066517691},{"path":"/Users/weiweiwei/code/projects/init-admin/babel.config.js","mtime":1690970233489},{"path":"/Users/weiweiwei/code/projects/init-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weiweiwei/code/projects/init-admin/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL1VzZXJzL3dlaXdlaXdlaS9jb2RlL3Byb2plY3RzL2luaXQtYWRtaW4vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCB7IGFzeW5jUm91dGVzLCBjb25zdGFudFJvdXRlcyB9IGZyb20gJ0Avcm91dGVyJzsKaW1wb3J0IExheW91dCBmcm9tICdAL2xheW91dCc7CmltcG9ydCB7IGdldFJvdXRlcnMgfSBmcm9tICdAL2FwaS91c2VyJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtdWkiOwoKLyoqCiAqIFVzZSBtZXRhLnJvbGUgdG8gZGV0ZXJtaW5lIGlmIHRoZSBjdXJyZW50IHVzZXIgaGFzIHBlcm1pc3Npb24KICogQHBhcmFtIGF1dGhvcml6YXRpb24KICogQHBhcmFtIHJvdXRlCiAqLwpmdW5jdGlvbiBoYXNBdXRob3JpemF0aW9uKGF1dGhvcml6YXRpb24sIHJvdXRlKSB7CiAgaWYgKHJvdXRlLm1ldGEgJiYgcm91dGUubWV0YS5wZXJtcykgewogICAgdmFyIGFsbEF1dGggPSAiKjoqOioiLAogICAgICBhdXRoID0gcm91dGUubWV0YS5wZXJtczsKICAgIGlmIChhdXRoICYmIGF1dGgubGVuZ3RoID4gMCkgewogICAgICByZXR1cm4gYXV0aG9yaXphdGlvbi5zb21lKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuIGFsbEF1dGggPT09IHYgfHwgdiA9PT0gYXV0aDsKICAgICAgfSk7CiAgICB9CiAgfQogIHJldHVybiB0cnVlOwp9CgovKioKICog5ZCO5Y+w5p+l6K+i55qE6I+c5Y2V5pWw5o2u5ou86KOF5oiQ6Lev55Sx5qC85byP55qE5pWw5o2uCiAqIEBwYXJhbSBkYXRhCiAqLwpleHBvcnQgZnVuY3Rpb24gZ2VuZXJhTWVudShkYXRhKSB7CiAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICBpdGVtLmNvbXBvbmVudCA9IGxvYWRDb21wb25lbnQoaXRlbS5jb21wb25lbnQpOwogICAgaWYgKGl0ZW0uY2hpbGRyZW4pIHsKICAgICAgaXRlbS5jaGlsZHJlbiA9IGdlbmVyYU1lbnUoaXRlbS5jaGlsZHJlbik7CiAgICB9CiAgfSk7CiAgcmV0dXJuIGRhdGE7Cn0KZXhwb3J0IGZ1bmN0aW9uIGxvYWRDb21wb25lbnQoY29tcG9uZW50KSB7CiAgaWYgKGNvbXBvbmVudCA9PT0gJyMnKSB7CiAgICByZXR1cm4gTGF5b3V0OwogIH0gZWxzZSBpZiAoY29tcG9uZW50ID09PSAnIyMnKSB7CiAgICByZXR1cm4gbG9hZFZpZXcoJ2NvbXBvbmVudHMvbmVzdGVkJyk7CiAgfSBlbHNlIHsKICAgIHJldHVybiBsb2FkVmlldyhjb21wb25lbnQpOwogIH0KfQoKLyoqCiAqIOmdmeaAgei3r+eUseaHkuWKoOi9vQogKiBAcGFyYW0gdmlldyAg5qC85byP5b+F6aG75Li6IHh4eC94eHgg5byA5aS05LiN6KaB5Yqg5pac5p2gCiAqIEByZXR1cm5zCiAqLwpleHBvcnQgdmFyIGxvYWRWaWV3ID0gZnVuY3Rpb24gbG9hZFZpZXcodmlldykgewogIHJldHVybiBmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgcmV0dXJuIHJlcXVpcmUoWyJAL3ZpZXdzLyIuY29uY2F0KHZpZXcsICIudnVlIildLCByZXNvbHZlKTsKICB9Owp9OwoKLyoqCiAqIEZpbHRlciBhc3luY2hyb25vdXMgcm91dGluZyB0YWJsZXMgYnkgcmVjdXJzaW9uCiAqIEBwYXJhbSByb3V0ZXMgYXN5bmNSb3V0ZXMKICogQHBhcmFtIGF1dGhzCiAqLwpleHBvcnQgZnVuY3Rpb24gZmlsdGVyQXN5bmNSb3V0ZXMocm91dGVzLCBhdXRocykgewogIHZhciByZXMgPSBbXTsKICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGUpIHsKICAgIHZhciB0bXAgPSBfb2JqZWN0U3ByZWFkKHt9LCByb3V0ZSk7CiAgICBpZiAoaGFzQXV0aG9yaXphdGlvbihhdXRocywgdG1wKSkgewogICAgICBpZiAodG1wLmNoaWxkcmVuKSB7CiAgICAgICAgdG1wLmNoaWxkcmVuID0gZmlsdGVyQXN5bmNSb3V0ZXModG1wLmNoaWxkcmVuLCBhdXRocyk7CiAgICAgIH0KICAgICAgcmVzLnB1c2godG1wKTsKICAgIH0KICB9KTsKICByZXR1cm4gcmVzOwp9CnZhciBzdGF0ZSA9IHsKICByb3V0ZXM6IFtdLAogIGFkZFJvdXRlczogW10KfTsKdmFyIG11dGF0aW9ucyA9IHsKICBTRVRfUk9VVEVTOiBmdW5jdGlvbiBTRVRfUk9VVEVTKHN0YXRlLCByb3V0ZXMpIHsKICAgIHN0YXRlLmFkZFJvdXRlcyA9IHJvdXRlczsKICAgIHN0YXRlLnJvdXRlcyA9IGNvbnN0YW50Um91dGVzLmNvbmNhdChyb3V0ZXMpOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgZ2VuZXJhdGVSb3V0ZXM6IGZ1bmN0aW9uIGdlbmVyYXRlUm91dGVzKF9yZWYsIGF1dGhzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgdmFyIGxvYWRNZW51RGF0YSA9IFtdOwogICAgICAvLyDlhYjmn6Xor6LlkI7lj7Dlubbov5Tlm57lt6bkvqfoj5zljZXmlbDmja7lubbmiormlbDmja7mt7vliqDliLDot6/nlLEKICAgICAgZ2V0Um91dGVycyhzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgaWYgKHJlc3BvbnNlLmNvZGUgIT09IDIwMCkgewogICAgICAgICAgTWVzc2FnZSh7CiAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLm1zZyB8fCAnRXJyb3InLAogICAgICAgICAgICB0eXBlOiAnZXJyb3InLAogICAgICAgICAgICBkdXJhdGlvbjogNSAqIDEwMDAKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBPYmplY3QuYXNzaWduKGxvYWRNZW51RGF0YSwgZGF0YSA/IGRhdGEgOiBbXSk7CiAgICAgICAgICBsb2FkTWVudURhdGEgPSBsb2FkTWVudURhdGEuY29uY2F0KGFzeW5jUm91dGVzKTsKICAgICAgICAgIHZhciBhY2Nlc3NlZFJvdXRlcywKICAgICAgICAgICAgZ2V0TWVudSA9IGdlbmVyYU1lbnUobG9hZE1lbnVEYXRhKTsKICAgICAgICAgIGFjY2Vzc2VkUm91dGVzID0gZmlsdGVyQXN5bmNSb3V0ZXMoZ2V0TWVudSwgYXV0aHMpOwogICAgICAgICAgYWNjZXNzZWRSb3V0ZXMucHVzaCh7CiAgICAgICAgICAgIHBhdGg6ICcqJywKICAgICAgICAgICAgcmVkaXJlY3Q6ICcvNDA0JwogICAgICAgICAgfSk7CiAgICAgICAgICBjb21taXQoJ1NFVF9ST1VURVMnLCBhY2Nlc3NlZFJvdXRlcyk7CiAgICAgICAgICByZXNvbHZlKGFjY2Vzc2VkUm91dGVzKTsKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"names":["asyncRoutes","constantRoutes","Layout","getRouters","Message","hasAuthorization","authorization","route","meta","perms","allAuth","auth","length","some","v","generaMenu","data","forEach","item","component","loadComponent","children","loadView","view","resolve","require","concat","filterAsyncRoutes","routes","auths","res","tmp","_objectSpread","push","state","addRoutes","mutations","SET_ROUTES","actions","generateRoutes","_ref","commit","Promise","loadMenuData","token","then","response","code","message","msg","type","duration","Object","assign","accessedRoutes","getMenu","path","redirect","catch","error","console","log","namespaced"],"sources":["/Users/weiweiwei/code/projects/init-admin/src/store/modules/permission.js"],"sourcesContent":["import { asyncRoutes, constantRoutes } from '@/router'\nimport Layout from '@/layout'\nimport { getRouters } from '@/api/user'\nimport { Message } from \"element-ui\";\n\n/**\n * Use meta.role to determine if the current user has permission\n * @param authorization\n * @param route\n */\nfunction hasAuthorization(authorization, route) {\n  if (route.meta && route.meta.perms) {\n    const allAuth = \"*:*:*\",\n      auth = route.meta.perms\n    if (auth && auth.length > 0) {\n      return authorization.some(v => {\n        return allAuth === v || v === auth\n      })\n    }\n  }\n  return true\n}\n\n\n/**\n * 后台查询的菜单数据拼装成路由格式的数据\n * @param data\n */\nexport function generaMenu(data) {\n  data.forEach(item => {\n    item.component = loadComponent(item.component)\n    if (item.children) {\n      item.children = generaMenu(item.children)\n    }\n  })\n  return data\n}\nexport function loadComponent(component) {\n  if (component === '#' ){\n    return Layout;\n  }else if(component === '##' ){\n    return loadView('components/nested');\n  }else{\n    return loadView(component);\n  }\n}\n\n/**\n * 静态路由懒加载\n * @param view  格式必须为 xxx/xxx 开头不要加斜杠\n * @returns\n */\n export const loadView = (view) => {\n  return (resolve) => require([`@/views/${view}.vue`], resolve)\n}\n\n/**\n * Filter asynchronous routing tables by recursion\n * @param routes asyncRoutes\n * @param auths\n */\nexport function filterAsyncRoutes(routes, auths) {\n  const res = []\n\n  routes.forEach(route => {\n    const tmp = { ...route }\n    if (hasAuthorization(auths, tmp)) {\n      if (tmp.children) {\n        tmp.children = filterAsyncRoutes(tmp.children, auths)\n      }\n      res.push(tmp)\n    }\n  })\n\n  return res\n}\n\nconst state = {\n  routes: [],\n  addRoutes: []\n}\n\nconst mutations = {\n  SET_ROUTES: (state, routes) => {\n    state.addRoutes = routes\n    state.routes = constantRoutes.concat(routes)\n  }\n}\n\nconst actions = {\n  generateRoutes({ commit }, auths) {\n    return new Promise(resolve => {\n      let loadMenuData = []\n      // 先查询后台并返回左侧菜单数据并把数据添加到路由\n      getRouters(state.token).then(response => {\n        const { data } = response\n        if (response.code !== 200) {\n          Message({\n            message: response.msg || 'Error',\n            type: 'error',\n            duration: 5 * 1000\n          })\n        } else {\n          Object.assign(loadMenuData, data? data: [])\n          loadMenuData = loadMenuData.concat(asyncRoutes)\n\n          let accessedRoutes , getMenu = generaMenu(loadMenuData)\n          accessedRoutes = filterAsyncRoutes(getMenu, auths)\n          accessedRoutes.push({\n            path:'*',\n            redirect:'/404',\n          })\n          commit('SET_ROUTES', accessedRoutes)\n          resolve(accessedRoutes)\n        }\n      }).catch(error => {\n        console.log(error)\n      })\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n"],"mappings":"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"}]}