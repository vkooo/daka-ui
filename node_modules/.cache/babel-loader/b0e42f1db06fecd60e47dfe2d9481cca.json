{"remainingRequest":"/Users/weiweiwei/code/projects/init-admin/node_modules/babel-loader/lib/index.js!/Users/weiweiwei/code/projects/init-admin/src/store/modules/user.js","dependencies":[{"path":"/Users/weiweiwei/code/projects/init-admin/src/store/modules/user.js","mtime":1691341258313},{"path":"/Users/weiweiwei/code/projects/init-admin/babel.config.js","mtime":1690970233489},{"path":"/Users/weiweiwei/code/projects/init-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weiweiwei/code/projects/init-admin/node_modules/babel-loader/lib/index.js","mtime":456789000000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcudHJpbS5qcyI7CmltcG9ydCB7IGxvZ2luIGFzIF9sb2dpbiwgbG9nb3V0IGFzIF9sb2dvdXQsIGdldEluZm8gYXMgX2dldEluZm8gfSBmcm9tICdAL2FwaS9hdXRoL3VzZXInOwppbXBvcnQgeyBnZXRUb2tlbiwgc2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJzsKaW1wb3J0IHsgcmVzZXRSb3V0ZXIgfSBmcm9tICdAL3JvdXRlcic7CnZhciBnZXREZWZhdWx0U3RhdGUgPSBmdW5jdGlvbiBnZXREZWZhdWx0U3RhdGUoKSB7CiAgcmV0dXJuIHsKICAgIHVzZXJJbmZvOiB7fSwKICAgIHRva2VuOiBnZXRUb2tlbigpLAogICAgbmFtZTogJycsCiAgICBhdmF0YXI6ICcnLAogICAgYXV0aHM6IFtdCiAgfTsKfTsKdmFyIHN0YXRlID0gZ2V0RGVmYXVsdFN0YXRlKCk7CnZhciBtdXRhdGlvbnMgPSB7CiAgUkVTRVRfU1RBVEU6IGZ1bmN0aW9uIFJFU0VUX1NUQVRFKHN0YXRlKSB7CiAgICBPYmplY3QuYXNzaWduKHN0YXRlLCBnZXREZWZhdWx0U3RhdGUoKSk7CiAgfSwKICBTRVRfVVNFUklORk86IGZ1bmN0aW9uIFNFVF9VU0VSSU5GTyhzdGF0ZSwgaW5mbykgewogICAgc3RhdGUudXNlckluZm8gPSBpbmZvOwogIH0sCiAgU0VUX1RPS0VOOiBmdW5jdGlvbiBTRVRfVE9LRU4oc3RhdGUsIHRva2VuKSB7CiAgICBzdGF0ZS50b2tlbiA9IHRva2VuOwogIH0sCiAgU0VUX05BTUU6IGZ1bmN0aW9uIFNFVF9OQU1FKHN0YXRlLCBuYW1lKSB7CiAgICBzdGF0ZS5uYW1lID0gbmFtZTsKICB9LAogIFNFVF9BVkFUQVI6IGZ1bmN0aW9uIFNFVF9BVkFUQVIoc3RhdGUsIGF2YXRhcikgewogICAgc3RhdGUuYXZhdGFyID0gYXZhdGFyOwogIH0sCiAgU0VUX0FVVEhTOiBmdW5jdGlvbiBTRVRfQVVUSFMoc3RhdGUsIGF1dGhzKSB7CiAgICBzdGF0ZS5hdXRocyA9IGF1dGhzOwogIH0KfTsKdmFyIGFjdGlvbnMgPSB7CiAgLy8gdXNlciBsb2dpbgogIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihfcmVmLCB1c2VySW5mbykgewogICAgdmFyIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgdmFyIGFjY291bnQgPSB1c2VySW5mby5hY2NvdW50LAogICAgICBwYXNzd29yZCA9IHVzZXJJbmZvLnBhc3N3b3JkOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2xvZ2luKHsKICAgICAgICBhY2NvdW50OiBhY2NvdW50LnRyaW0oKSwKICAgICAgICBwYXNzd29yZDogcGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICB2YXIgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgY29tbWl0KCdTRVRfVE9LRU4nLCBkYXRhLnRva2VuKTsKICAgICAgICBzZXRUb2tlbihkYXRhLnRva2VuKTsKICAgICAgICByZXNvbHZlKCk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyBnZXQgdXNlciBpbmZvCiAgZ2V0SW5mbzogZnVuY3Rpb24gZ2V0SW5mbyhfcmVmMikgewogICAgdmFyIGNvbW1pdCA9IF9yZWYyLmNvbW1pdCwKICAgICAgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgIF9nZXRJbmZvKHN0YXRlLnRva2VuKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIHZhciBkYXRhID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICBpZiAoIWRhdGEpIHsKICAgICAgICAgIHJlamVjdCgn6aqM6K+B5aSx6LSl77yM6K+36YeN5paw55m75b2V44CCJyk7CiAgICAgICAgfQogICAgICAgIHZhciB1c2VySW5mbyA9IGRhdGEudXNlckluZm87CiAgICAgICAgdmFyIGF1dGhzID0gdXNlckluZm8uYXV0aHMsCiAgICAgICAgICBuYW1lID0gdXNlckluZm8ubmFtZSwKICAgICAgICAgIGF2YXRhciA9IHVzZXJJbmZvLmF2YXRhcjsKICAgICAgICBpZiAoIWF1dGhzIHx8IGF1dGhzLmxlbmd0aCA8PSAwKSB7CiAgICAgICAgICByZWplY3QoJ+W9k+WJjeeUqOaIt+aaguaXoOS7u+S9leadg+mZkCEnKTsKICAgICAgICB9CiAgICAgICAgY29tbWl0KCdTRVRfQVVUSFMnLCBhdXRocyk7CiAgICAgICAgY29tbWl0KCdTRVRfTkFNRScsIG5hbWUpOwogICAgICAgIGNvbW1pdCgnU0VUX0FWQVRBUicsIGF2YXRhcik7CiAgICAgICAgY29tbWl0KCdTRVRfVVNFUklORk8nLCB1c2VySW5mbyk7CiAgICAgICAgcmVzb2x2ZSh1c2VySW5mbyk7CiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIHJlamVjdChlcnJvcik7CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICAvLyB1c2VyIGxvZ291dAogIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KF9yZWYzKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjMuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWYzLnN0YXRlOwogICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgX2xvZ291dChzdGF0ZS50b2tlbikudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAogICAgICAgIHJlc2V0Um91dGVyKCk7CiAgICAgICAgY29tbWl0KCdSRVNFVF9TVEFURScpOwogICAgICAgIGNvbW1pdCgnU0VUX0FVVEhTJywgW10pOwogICAgICAgIGNvbW1pdCgnU0VUX1RPS0VOJywgJycpOwogICAgICAgIHJlc29sdmUoKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgfSk7CiAgICB9KTsKICB9LAogIC8vIHJlbW92ZSB0b2tlbgogIHJlc2V0VG9rZW46IGZ1bmN0aW9uIHJlc2V0VG9rZW4oX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQ7CiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgcmVtb3ZlVG9rZW4oKTsgLy8gbXVzdCByZW1vdmUgIHRva2VuICBmaXJzdAogICAgICBjb21taXQoJ1JFU0VUX1NUQVRFJyk7CiAgICAgIGNvbW1pdCgnU0VUX0FVVEhTJywgW10pOwogICAgICByZXNvbHZlKCk7CiAgICB9KTsKICB9Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiBzdGF0ZSwKICBtdXRhdGlvbnM6IG11dGF0aW9ucywKICBhY3Rpb25zOiBhY3Rpb25zCn07"},{"version":3,"names":["login","logout","getInfo","getToken","setToken","removeToken","resetRouter","getDefaultState","userInfo","token","name","avatar","auths","state","mutations","RESET_STATE","Object","assign","SET_USERINFO","info","SET_TOKEN","SET_NAME","SET_AVATAR","SET_AUTHS","actions","_ref","commit","account","password","Promise","resolve","reject","trim","then","response","data","catch","error","_ref2","length","_ref3","resetToken","_ref4","namespaced"],"sources":["/Users/weiweiwei/code/projects/init-admin/src/store/modules/user.js"],"sourcesContent":["import { login, logout, getInfo } from '@/api/auth/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\nimport { resetRouter } from '@/router'\n\nconst getDefaultState = () => {\n  return {\n    userInfo: {},\n    token: getToken(),\n    name: '',\n    avatar: '',\n    auths: []\n  }\n}\n\nconst state = getDefaultState()\n\nconst mutations = {\n  RESET_STATE: (state) => {\n    Object.assign(state, getDefaultState())\n  },\n  SET_USERINFO: (state, info) => {\n    state.userInfo = info\n  },\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_AUTHS: (state, auths) => {\n    state.auths = auths\n  },\n}\n\nconst actions = {\n  // user login\n  login({ commit }, userInfo) {\n    const { account, password } = userInfo\n    return new Promise((resolve, reject) => {\n      login({ account: account.trim(), password: password }).then(response => {\n        const { data } = response\n        commit('SET_TOKEN', data.token)\n        setToken(data.token)\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        const { data } = response\n\n        if (!data) {\n          reject('验证失败，请重新登录。')\n        }\n\n        const userInfo =  data.userInfo\n       \n        const { auths, name, avatar } = userInfo\n\n        if (!auths || auths.length <= 0) {\n          reject('当前用户暂无任何权限!')\n        }\n\n        commit('SET_AUTHS', auths)\n        commit('SET_NAME', name)\n        commit('SET_AVATAR', avatar)\n        commit('SET_USERINFO', userInfo)\n        \n        resolve(userInfo)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      logout(state.token).then(() => {\n        removeToken() // must remove  token  first\n        resetRouter()\n        commit('RESET_STATE')\n        commit('SET_AUTHS', [])\n        commit('SET_TOKEN', '')\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      removeToken() // must remove  token  first\n      commit('RESET_STATE')\n      commit('SET_AUTHS', [])\n      \n      resolve()\n    })\n  }\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n"],"mappings":"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"}]}