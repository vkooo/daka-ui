{"remainingRequest":"/Users/weiweiwei/code/projects/init-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/weiweiwei/code/projects/init-admin/src/views/login/components/passwordForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/weiweiwei/code/projects/init-admin/src/views/login/components/passwordForm.vue","mtime":1691396468689},{"path":"/Users/weiweiwei/code/projects/init-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weiweiwei/code/projects/init-admin/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/weiweiwei/code/projects/init-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weiweiwei/code/projects/init-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKCWRhdGEoKSB7CgkJcmV0dXJuIHsKCQkJdXNlclR5cGU6ICdhZG1pbicsCgkJCWZvcm06IHsKCQkJCXVzZXI6ICJhZG1pbiIsCgkJCQlwYXNzd29yZDogImFkbWluIiwKCQkJCWF1dG9sb2dpbjogZmFsc2UKCQkJfSwKCQkJcnVsZXM6IHsKCQkJCXVzZXI6IFsKCQkJCQl7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6IHRoaXMuJHQoJ2xvZ2luLnVzZXJFcnJvcicpLCB0cmlnZ2VyOiAnYmx1cid9CgkJCQldLAoJCQkJcGFzc3dvcmQ6IFsKCQkJCQl7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6IHRoaXMuJHQoJ2xvZ2luLlBXRXJyb3InKSwgdHJpZ2dlcjogJ2JsdXInfQoJCQkJXQoJCQl9LAoJCQlpc2xvZ2luOiBmYWxzZSwKCQl9Cgl9LAoJd2F0Y2g6ewoJCXVzZXJUeXBlKHZhbCl7CgkJCWlmKHZhbCA9PSAnYWRtaW4nKXsKCQkJCXRoaXMuZm9ybS51c2VyID0gJ2FkbWluJwoJCQkJdGhpcy5mb3JtLnBhc3N3b3JkID0gJ2FkbWluJwoJCQl9ZWxzZSBpZih2YWwgPT0gJ3VzZXInKXsKCQkJCXRoaXMuZm9ybS51c2VyID0gJ3VzZXInCgkJCQl0aGlzLmZvcm0ucGFzc3dvcmQgPSAndXNlcicKCQkJfQoJCX0KCX0sCgltb3VudGVkKCkgewoKCX0sCgltZXRob2RzOiB7CgkJYXN5bmMgbG9naW4oKXsKCgkJCXZhciB2YWxpZGF0ZSA9IGF3YWl0IHRoaXMuJHJlZnMubG9naW5Gb3JtLnZhbGlkYXRlKCkuY2F0Y2goKCk9Pnt9KQoJCQlpZighdmFsaWRhdGUpeyByZXR1cm4gZmFsc2UgfQoKCQkJdGhpcy5pc2xvZ2luID0gdHJ1ZQoJCQl2YXIgZGF0YSA9IHsKCQkJCXVzZXJuYW1lOiB0aGlzLmZvcm0udXNlciwKCQkJCXBhc3N3b3JkOiB0aGlzLiRUT09MLmNyeXB0by5NRDUodGhpcy5mb3JtLnBhc3N3b3JkKQoJCQl9CgkJCS8v6I635Y+WdG9rZW4KCQkJdmFyIHVzZXIgPSBhd2FpdCB0aGlzLiRBUEkuYXV0aC50b2tlbi5wb3N0KGRhdGEpCgkJCWlmKHVzZXIuY29kZSA9PSAyMDApewoJCQkJdGhpcy4kVE9PTC5jb29raWUuc2V0KCJUT0tFTiIsIHVzZXIuZGF0YS50b2tlbiwgewoJCQkJCWV4cGlyZXM6IHRoaXMuZm9ybS5hdXRvbG9naW4/IDI0KjYwKjYwIDogMAoJCQkJfSkKCQkJCXRoaXMuJFRPT0wuZGF0YS5zZXQoIlVTRVJfSU5GTyIsIHVzZXIuZGF0YS51c2VySW5mbykKCQkJfWVsc2V7CgkJCQl0aGlzLmlzbG9naW4gPSBmYWxzZQoJCQkJdGhpcy4kbWVzc2FnZS53YXJuaW5nKHVzZXIubWVzc2FnZSkKCQkJCXJldHVybiBmYWxzZQoJCQl9CgkJCS8v6I635Y+W6I+c5Y2VCgkJCXZhciBtZW51ID0gbnVsbAoJCQlpZih0aGlzLmZvcm0udXNlciA9PSAnYWRtaW4nKXsKCQkJCW1lbnUgPSBhd2FpdCB0aGlzLiRBUEkuc3lzdGVtLm1lbnUubXlNZW51cy5nZXQoKQoJCQl9ZWxzZXsKCQkJCW1lbnUgPSBhd2FpdCB0aGlzLiRBUEkuZGVtby5tZW51LmdldCgpCgkJCX0KCQkJaWYobWVudS5jb2RlID09IDIwMCl7CgkJCQlpZihtZW51LmRhdGEubWVudS5sZW5ndGg9PTApewoJCQkJCXRoaXMuaXNsb2dpbiA9IGZhbHNlCgkJCQkJdGhpcy4kYWxlcnQoIuW9k+WJjeeUqOaIt+aXoOS7u+S9leiPnOWNleadg+mZkO+8jOivt+iBlOezu+ezu+e7n+euoeeQhuWRmCIsICLml6DmnYPpmZDorr/pl64iLCB7CgkJCQkJCXR5cGU6ICdlcnJvcicsCgkJCQkJCWNlbnRlcjogdHJ1ZQoJCQkJCX0pCgkJCQkJcmV0dXJuIGZhbHNlCgkJCQl9CgkJCQl0aGlzLiRUT09MLmRhdGEuc2V0KCJNRU5VIiwgbWVudS5kYXRhLm1lbnUpCgkJCQl0aGlzLiRUT09MLmRhdGEuc2V0KCJQRVJNSVNTSU9OUyIsIG1lbnUuZGF0YS5wZXJtaXNzaW9ucykKCQkJCXRoaXMuJFRPT0wuZGF0YS5zZXQoIkRBU0hCT0FSREdSSUQiLCBtZW51LmRhdGEuZGFzaGJvYXJkR3JpZCkKCQkJfWVsc2V7CgkJCQl0aGlzLmlzbG9naW4gPSBmYWxzZQoJCQkJdGhpcy4kbWVzc2FnZS53YXJuaW5nKG1lbnUubWVzc2FnZSkKCQkJCXJldHVybiBmYWxzZQoJCQl9CgoJCQl0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CgkJCQlwYXRoOiAnLycKCQkJfSkKCQkJdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCJMb2dpbiBTdWNjZXNzIOeZu+W9leaIkOWKnyIpCgkJCXRoaXMuaXNsb2dpbiA9IGZhbHNlCgkJfSwKCX0KfQo="},{"version":3,"sources":["passwordForm.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"passwordForm.vue","sourceRoot":"src/views/login/components","sourcesContent":["<template>\n\t<el-form ref=\"loginForm\" :model=\"form\" :rules=\"rules\" label-width=\"0\" size=\"large\" @keyup.enter=\"login\">\n\t\t<el-form-item prop=\"user\">\n\t\t\t<el-input v-model=\"form.user\" prefix-icon=\"el-icon-user\" clearable placeholder=\"ssss\">\n\t\t\t\t<template #append>\n\t\t\t\t\t<el-select v-model=\"userType\" style=\"width: 130px;\">\n\t\t\t\t\t\t<el-option label=\"账号\" value=\"admin\"></el-option>\n\t\t\t\t\t\t<el-option label=\"密码\" value=\"user\"></el-option>\n\t\t\t\t\t</el-select>\n\t\t\t\t</template>\n\t\t\t</el-input>\n\t\t</el-form-item>\n\t\t<el-form-item prop=\"password\">\n\t\t\t<el-input v-model=\"form.password\" prefix-icon=\"el-icon-lock\" clearable show-password :placeholder=\"$t('login.PWPlaceholder')\"></el-input>\n\t\t</el-form-item>\n\t\t<el-form-item style=\"margin-bottom: 10px;\">\n\t\t\t\t<el-col :span=\"12\">\n\t\t\t\t\t<el-checkbox :label=\"$t('login.rememberMe')\" v-model=\"form.autologin\"></el-checkbox>\n\t\t\t\t</el-col>\n\t\t\t\t<el-col :span=\"12\" class=\"login-forgot\">\n\t\t\t\t\t<router-link to=\"/reset_password\">{{ $t('login.forgetPassword') }}？</router-link>\n\t\t\t\t</el-col>\n\t\t</el-form-item>\n\t\t<el-form-item>\n\t\t\t<el-button type=\"primary\" style=\"width: 100%;\" :loading=\"islogin\" round @click=\"login\">{{ $t('login.signIn') }}</el-button>\n\t\t</el-form-item>\n\t\t<div class=\"login-reg\">\n\t\t\t{{$t('login.noAccount')}} <router-link to=\"/user_register\">{{$t('login.createAccount')}}</router-link>\n\t\t</div>\n\t</el-form>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tuserType: 'admin',\n\t\t\t\tform: {\n\t\t\t\t\tuser: \"admin\",\n\t\t\t\t\tpassword: \"admin\",\n\t\t\t\t\tautologin: false\n\t\t\t\t},\n\t\t\t\trules: {\n\t\t\t\t\tuser: [\n\t\t\t\t\t\t{required: true, message: this.$t('login.userError'), trigger: 'blur'}\n\t\t\t\t\t],\n\t\t\t\t\tpassword: [\n\t\t\t\t\t\t{required: true, message: this.$t('login.PWError'), trigger: 'blur'}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tislogin: false,\n\t\t\t}\n\t\t},\n\t\twatch:{\n\t\t\tuserType(val){\n\t\t\t\tif(val == 'admin'){\n\t\t\t\t\tthis.form.user = 'admin'\n\t\t\t\t\tthis.form.password = 'admin'\n\t\t\t\t}else if(val == 'user'){\n\t\t\t\t\tthis.form.user = 'user'\n\t\t\t\t\tthis.form.password = 'user'\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmounted() {\n\n\t\t},\n\t\tmethods: {\n\t\t\tasync login(){\n\n\t\t\t\tvar validate = await this.$refs.loginForm.validate().catch(()=>{})\n\t\t\t\tif(!validate){ return false }\n\n\t\t\t\tthis.islogin = true\n\t\t\t\tvar data = {\n\t\t\t\t\tusername: this.form.user,\n\t\t\t\t\tpassword: this.$TOOL.crypto.MD5(this.form.password)\n\t\t\t\t}\n\t\t\t\t//获取token\n\t\t\t\tvar user = await this.$API.auth.token.post(data)\n\t\t\t\tif(user.code == 200){\n\t\t\t\t\tthis.$TOOL.cookie.set(\"TOKEN\", user.data.token, {\n\t\t\t\t\t\texpires: this.form.autologin? 24*60*60 : 0\n\t\t\t\t\t})\n\t\t\t\t\tthis.$TOOL.data.set(\"USER_INFO\", user.data.userInfo)\n\t\t\t\t}else{\n\t\t\t\t\tthis.islogin = false\n\t\t\t\t\tthis.$message.warning(user.message)\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\t//获取菜单\n\t\t\t\tvar menu = null\n\t\t\t\tif(this.form.user == 'admin'){\n\t\t\t\t\tmenu = await this.$API.system.menu.myMenus.get()\n\t\t\t\t}else{\n\t\t\t\t\tmenu = await this.$API.demo.menu.get()\n\t\t\t\t}\n\t\t\t\tif(menu.code == 200){\n\t\t\t\t\tif(menu.data.menu.length==0){\n\t\t\t\t\t\tthis.islogin = false\n\t\t\t\t\t\tthis.$alert(\"当前用户无任何菜单权限，请联系系统管理员\", \"无权限访问\", {\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\tcenter: true\n\t\t\t\t\t\t})\n\t\t\t\t\t\treturn false\n\t\t\t\t\t}\n\t\t\t\t\tthis.$TOOL.data.set(\"MENU\", menu.data.menu)\n\t\t\t\t\tthis.$TOOL.data.set(\"PERMISSIONS\", menu.data.permissions)\n\t\t\t\t\tthis.$TOOL.data.set(\"DASHBOARDGRID\", menu.data.dashboardGrid)\n\t\t\t\t}else{\n\t\t\t\t\tthis.islogin = false\n\t\t\t\t\tthis.$message.warning(menu.message)\n\t\t\t\t\treturn false\n\t\t\t\t}\n\n\t\t\t\tthis.$router.replace({\n\t\t\t\t\tpath: '/'\n\t\t\t\t})\n\t\t\t\tthis.$message.success(\"Login Success 登录成功\")\n\t\t\t\tthis.islogin = false\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n<style>\n</style>\n"]}]}