{"remainingRequest":"/Users/weiweiwei/code/projects/init-admin/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/weiweiwei/code/projects/init-admin/src/components/VkPicture/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/weiweiwei/code/projects/init-admin/src/components/VkPicture/index.vue","mtime":1691774185589},{"path":"/Users/weiweiwei/code/projects/init-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weiweiwei/code/projects/init-admin/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/weiweiwei/code/projects/init-admin/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/weiweiwei/code/projects/init-admin/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBUcmVlc2VsZWN0IGZyb20gIkByaW9waGFlL3Z1ZS10cmVlc2VsZWN0IjsKaW1wb3J0ICJAcmlvcGhhZS92dWUtdHJlZXNlbGVjdC9kaXN0L3Z1ZS10cmVlc2VsZWN0LmNzcyI7CmltcG9ydCAqIGFzIGF0dGFjaG1lbnRBcGkgZnJvbSAiQC9hcGkvYXR0YWNobWVudCI7CmltcG9ydCAqIGFzIGNhdGVnb3J5QXBpIGZyb20gIkAvYXBpL2F0dGFjaG1lbnQvY2F0ZWdvcnkiOwppbXBvcnQgeyBjb25maXJtIH0gZnJvbSAiQC91dGlscy9tZXNzYWdlLWJveC5qcyI7CmltcG9ydCB7IGdldFRva2VuIH0gZnJvbSAnQC91dGlscy9hdXRoJwppbXBvcnQgU3BhcmtNRDUgZnJvbSAnc3BhcmstbWQ1JwoKbGV0IERPTUFJTiA9IHByb2Nlc3MuZW52LlZVRV9BUFBfQkFTRV9ET01BSU4KZXhwb3J0IGRlZmF1bHQgewogICAgY29tcG9uZW50czogeyBUcmVlc2VsZWN0IH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICAgICAgICBsaXN0OiBbXSwKICAgICAgICAgICAgdG90YWw6IDAsCiAgICAgICAgICAgIGRlZmF1bHRQcm9wczogewogICAgICAgICAgICAgICAgY2hpbGRyZW46ICdjaGlsZHJlbicsCiAgICAgICAgICAgICAgICBsYWJlbDogJ25hbWUnCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlbGVjdElkczpbXSwKICAgICAgICAgICAgc2VsZWN0VXJsczpbXSwKICAgICAgICAgICAgY2F0ZWdvcnlMaXN0OiBbXSwKICAgICAgICAgICAgY2F0ZWdvcnlBbGxMaXN0OiBbXSwKICAgICAgICAgICAgbW92ZUNhdGVnb3J5SWQ6IG51bGwsCiAgICAgICAgICAgIGRlbERpc2FibGVkOiB0cnVlLAogICAgICAgICAgICBjYXRlU2VhY2g6IHt9LAogICAgICAgICAgICBhdHRhY2htZW50OiB7fSwKICAgICAgICAgICAgZGlhbG9nQ2F0ZWdvcnlWaXNpYmxlOiBmYWxzZSwKICAgICAgICAgICAgY2F0ZWdvcnlGb3JtOiB7fSwKICAgICAgICAgICAgY2F0ZWdvcnlSdWxlczogewogICAgICAgICAgICAgICAgcGlkOiBbCiAgICAgICAgICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeS4iue6p+WIhuexuycsIHRyaWdnZXI6ICdibHVyJyB9LAogICAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAgIG5hbWU6IFsKICAgICAgICAgICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5YiG57G75ZCN56ewJywgdHJpZ2dlcjogJ2JsdXInIH0sCiAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgc29ydDogWwogICAgICAgICAgICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmjpLluo8nLCB0cmlnZ2VyOiAnYmx1cicgfSwKICAgICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRvbWFpbjogRE9NQUlOLAogICAgICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiAiQmVhcmVyICIgKyBnZXRUb2tlbigpCiAgICAgICAgICAgIH0KICAgICAgICB9OwogICAgfSwKICAgIHdhdGNoOnsKICAgICAgICBzZWxlY3RJZHM6ewogICAgICAgICAgICBoYW5kbGVyKG5ld1ZhbCwgb2xkVmFsKXsKICAgICAgICAgICAgICAgIHRoaXMuZGVsRGlzYWJsZWQgPSAhKG5ld1ZhbC5sZW5ndGggPiAwKQogICAgICAgICAgICB9LAogICAgICAgICAgICBpbW1lZGlhdGU6IHRydWUsCiAgICAgICAgICAgIGRlZXA6IHRydWUKICAgICAgICB9CiAgICB9LAogICAgY3JlYXRlZDogZnVuY3Rpb24oKXsKICAgICAgICB0aGlzLmdldENhdGVnb3J5TGlzdCgpCiAgICAgICAgdGhpcy5nZXRDYXRlZ29yeUFsbExpc3QoKQogICAgICAgIHRoaXMuZ2V0TGlzdCgpCiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGdldExpc3QoKXsKICAgICAgICAgICAgYXR0YWNobWVudEFwaS5saXN0cyh0aGlzLmF0dGFjaG1lbnQpLnRoZW4ocmVzPT57CiAgICAgICAgICAgICAgICBjb25zdCB7IGxpc3QsIHRvdGFsIH0gPSByZXMuZGF0YQogICAgICAgICAgICAgICAgdGhpcy5saXN0ID0gbGlzdAogICAgICAgICAgICAgICAgdGhpcy50b3RhbCA9IHRvdGFsCiAgICAgICAgICAgIH0pIAogICAgICAgIH0sCiAgICAgICAgZ2V0Q2F0ZWdvcnlMaXN0KCl7CiAgICAgICAgICAgIGNhdGVnb3J5QXBpLmxpc3RzKHRoaXMuY2F0ZVNlYWNoKS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgdGhpcy5jYXRlZ29yeUxpc3QgPSByZXMuZGF0YQogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgZ2V0Q2F0ZWdvcnlBbGxMaXN0KCl7CiAgICAgICAgICAgIGNhdGVnb3J5QXBpLmFsbExpc3RzKCkudGhlbihyZXM9PnsKICAgICAgICAgICAgICAgIHRoaXMuY2F0ZWdvcnlBbGxMaXN0ID0gcmVzLmRhdGEKICAgICAgICAgICAgfSkKICAgICAgICB9LAogICAgICAgIGVkaXROYW1lKGluZGV4KXsKICAgICAgICAgICAgdGhpcy5saXN0W2luZGV4XS5lZGl0ID0gIXRoaXMubGlzdFtpbmRleF0uZWRpdAogICAgICAgIH0sCiAgICAgICAgaW1hZ2VDbGljayhpdGVtKXsKICAgICAgICAgICAgbGV0IGlkcyA9IG5ldyBTZXQodGhpcy5zZWxlY3RJZHMpCiAgICAgICAgICAgICAgICAsIHVybHMgPSBuZXcgU2V0KHRoaXMuc2VsZWN0VXJscyk7CiAgICAgICAgICAgIAogICAgICAgICAgICBsZXQgZnVuID0gZnVuY3Rpb24gKHBhcmFtcywgcCkgewogICAgICAgICAgICAgICAgcGFyYW1zLmhhcyhwKT8gcGFyYW1zLmRlbGV0ZShwKTogcGFyYW1zLmFkZChwKQogICAgICAgICAgICAgICAgcmV0dXJuIFsuLi5wYXJhbXNdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc2VsZWN0SWRzID0gZnVuKGlkcywgaXRlbS5pZCkKCQkJdGhpcy5zZWxlY3RVcmxzID0gZnVuKHVybHMsIGl0ZW0udXJsKQogICAgICAgIH0sCiAgICAgICAgbm9ybWFsaXplcihub2RlKSB7CiAgICAgICAgICAgIGlmIChub2RlLmNoaWxkcmVuICYmICFub2RlLmNoaWxkcmVuLmxlbmd0aCkgewogICAgICAgICAgICAgICAgZGVsZXRlIG5vZGUuY2hpbGRyZW47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGlkOiBub2RlLmlkLAogICAgICAgICAgICAgICAgbGFiZWw6IG5vZGUubmFtZSwKICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBub2RlLmNoaWxkcmVuCiAgICAgICAgICAgIH07CiAgICAgICAgfSwKICAgICAgICByZW5kZXJUcmVlQ29udGVudChoLCB7IG5vZGUsIGRhdGEsIHN0b3JlIH0pIHsKICAgICAgICAgICAgbGV0IGh0bWwgPSAiIgogICAgICAgICAgICBpZihkYXRhLmlkID4gMCl7CiAgICAgICAgICAgICAgICBodG1sID0gPHNwYW4+CiAgICAgICAgICAgICAgICAgICAgPGVsLWJ1dHRvbiBzaXplPSJtaW5pIiB0eXBlPSJ0ZXh0IiBvbi1jbGljaz17ICgpID0+IHRoaXMuY2F0ZWdvcnlFZGl0KGRhdGEuaWQpIH0+57yW6L6RPC9lbC1idXR0b24+CiAgICAgICAgICAgICAgICAgICAgPGVsLWJ1dHRvbiBzaXplPSJtaW5pIiB0eXBlPSJ0ZXh0IiBvbi1jbGljaz17ICgpID0+IHRoaXMuY2F0ZWdvcnlEZWwgKGRhdGEuaWQpIH0+5Yig6ZmkPC9lbC1idXR0b24+CiAgICAgICAgICAgICAgICA8L3NwYW4+CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuICgKICAgICAgICAgICAgPHNwYW4gY2xhc3M9ImN1c3RvbS10cmVlLW5vZGUiPgogICAgICAgICAgICAgICAgPHNwYW4+e2RhdGEubmFtZX08L3NwYW4+CiAgICAgICAgICAgICAgICB7aHRtbH0KICAgICAgICAgICAgPC9zcGFuPik7CiAgICAgICAgfSwKICAgICAgICBjYXRlVHJlZUNsaWNrKGRhdGEpewogICAgICAgICAgICB0aGlzLmF0dGFjaG1lbnQuY2F0ZWdvcnlfaWQgPSBkYXRhLmlkCiAgICAgICAgICAgIHRoaXMuZ2V0TGlzdCgpICAgICAKICAgICAgICB9LAogICAgICAgIGNhdGVnb3J5RWRpdChpZCl7CiAgICAgICAgICAgIGNhdGVnb3J5QXBpLmVkaXQoaWQpLnRoZW4ocmVzPT57CiAgICAgICAgICAgICAgICB0aGlzLmNhdGVnb3J5Rm9ybSA9IGlkP3Jlcy5kYXRhOiB7fQogICAgICAgICAgICAgICAgdGhpcy5kaWFsb2dDYXRlZ29yeVZpc2libGUgPSB0cnVlIAogICAgICAgICAgICB9KQogICAgICAgIH0sCiAgICAgICAgY2F0ZWdvcnlEZWwoaWQpewogICAgICAgICAgICBjb25maXJtKCLmmK/lkKbmsLjkuYXliKDpmaTor6XmlbDmja7vvJ8iLCAoKT0+ewogICAgICAgICAgICAgICAgY2F0ZWdvcnlBcGkuZGVsKGlkKS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsCiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tc2csCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDYXRlZ29yeUxpc3QoKQogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwKICAgICAgICBjYXRlZ29yeVN1Ym1pdCgpewogICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXMKICAgICAgICAgICAgbGV0IGZvcm0gPSB0aGF0LmNhdGVnb3J5Rm9ybQogICAgICAgICAgICB0aGlzLiRyZWZzLmNhdGVnb3J5Rm9ybVJlZi52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICAgICAgICAgIGxldCBhcGkgPSBmb3JtLmlkPyBjYXRlZ29yeUFwaS51cGRhdGUoZm9ybSk6IGNhdGVnb3J5QXBpLmNyZWF0ZShmb3JtKQogICAgICAgICAgICAgICAgICAgIGFwaS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgICAgICAgICB0aGF0LmNhdGVnb3J5Rm9ybSA9IHJlcy5kYXRhCiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q2F0ZWdvcnlMaXN0KCkKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRDYXRlZ29yeUFsbExpc3QoKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpYWxvZ0NhdGVnb3J5VmlzaWJsZSA9IGZhbHNlCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9LAogICAgICAgIGZpbGVDaGFuZ2UoZmlsZSl7CiAgICAgICAgICAgIGNvbnN0IF90aGlzID0gdGhpcyAgCiAgICAgICAgICAgIGxldCBmaWxlUmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKQogICAgICAgICAgICBsZXQgU3BhcmsgPSBuZXcgU3BhcmtNRDUuQXJyYXlCdWZmZXIoKQogICAgICAgICAgICBmaWxlUmVhZGVyLnJlYWRBc0FycmF5QnVmZmVyKGZpbGUucmF3KQogICAgICAgICAgICBmaWxlUmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgU3BhcmsuYXBwZW5kKGUudGFyZ2V0LnJlc3VsdCkKICAgICAgICAgICAgICAgIGxldCBtZDUgPSBTcGFyay5lbmQoKQoKICAgICAgICAgICAgICAgIF90aGlzLiRuZXh0VGljayhfdGhpcy5maWxlTWQ1KGZpbGUsIG1kNSkpCiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlCiAgICAgICAgfSwKICAgICAgICBmaWxlTWQ1KGZpbGUsIG1kNSl7CiAgICAgICAgICAgIGlmKGZpbGUuc3RhdHVzICE9ICdyZWFkeScpIHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZQogICAgICAgICAgICB9CiAgICAgICAgICAgIGF0dGFjaG1lbnRBcGkuZmlsZU1kNSh7CiAgICAgICAgICAgICAgICBtZDU6IG1kNQogICAgICAgICAgICB9KS50aGVuKHJlcz0+ewogICAgICAgICAgICAgICAgaWYocmVzLmNvZGUgPT09IDIwMCl7CiAgICAgICAgICAgICAgICAgICAgaWYocmVzLmRhdGEgIT0gbnVsbCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gcmVzLmRhdGEKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5saXN0LnB1c2goewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZV9zdG9yZW5hbWU6IHJlcy5maWxlSlNPTi5maWxlX3N0b3JlbmFtZQogICAgICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnVwbG9hZC5oYW5kbGVSZW1vdmUoZmlsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybgogICAgICAgICAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLiRyZWZzLnVwbG9hZC5zdWJtaXQoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pCiAgICAgICAgfSwKICAgICAgICBzdWNjZXNzVXBsb2FkKHJlc3BvbnNlLCBmaWxlLCBmaWxlTGlzdCl7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLiBmaWxlKQogICAgICAgICAgICAvLyB0aGlzLmZpcm13YXJlRGF0YS5wdXNoKHsKICAgICAgICAgICAgLy8gICAgIGZpbGVfbmFtZTogZmlsZS5uYW1lLAogICAgICAgICAgICAvLyAgICAgZmlsZV9zdG9yZW5hbWU6IHJlc3BvbnNlLmZpbGVfc3RvcmVuYW1lCiAgICAgICAgICAgIC8vIH0pCiAgICAgICAgfSwKICAgICAgICBwYWdlQ2hhbmdlKHBhZ2UpewogICAgICAgICAgICB0aGlzLnF1ZXJ5RGF0YSgpCiAgICAgICAgICAgIHRoaXMucGFnZSA9IHBhZ2UKICAgICAgICAgICAgdGhpcy5nZXRMaXN0KCk7CiAgICAgICAgfSwKICAgIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4GA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/VkPicture","sourcesContent":["<template>\n    <div>\n        <el-dialog title=\"请选择图片\" \n            width=\"70%\"\n            :visible.sync=\"dialogVisible\" @close=\"dialogVisible = false\">\n            <el-row :gutter=\"20\">\n                <el-col :span=\"6\">\n                    <el-input placeholder=\"选择分类\" type=\"text\" clearable v-model=\"cateSeach.keyword\">\n                        <el-button type=\"primary\" slot=\"append\" @click=\"getCategoryList\" icon=\"el-icon-search\"></el-button>\n                    </el-input>\n                    <div class=\"pt10 pb10\">\n                        <el-tree :data=\"categoryList\" \n                            :props=\"defaultProps\" @node-click=\"cateTreeClick\"\n                            :render-content=\"renderTreeContent\"\n                        />\n                    </div>\n                </el-col>\n                <el-col :span=\"18\">\n                    <div>\n                        <el-button class=\"mb10 mr10\" size=\"mini\" type=\"primary\">使用选中图片</el-button>\n                        <el-button class=\"mb10 mr10\" size=\"mini\" type=\"primary\">\n                            <el-upload\n                                ref=\"upload\"\n                                class=\"upload-demo\"\n                                :action=\"domain + '/admin/attachment/upload'\"\n                                multiple\n                                :show-file-list=\"false\"\n                                :headers=\"headers\"\n                                :auto-upload=\"false\"\n                                :on-change=\"fileChange\"\n                                :on-success=\"successUpload\"\n                            >\n                                点击上传\n                            </el-upload>\n                        </el-button>\n                        <el-button class=\"mb10 mr10\" size=\"mini\" type=\"success\" @click=\"categoryEdit(0)\">添加分类</el-button>\n                        <el-button class=\"mb10 mr10\" size=\"mini\" type=\"danger\" :disabled=\"delDisabled\">删除图片</el-button>\n                    </div>\n                    <div class=\"vk-flex\">\n                        <div class=\"mr10\">\n                            <el-input style=\"width: 230px;\" placeholder=\"请输入图片名称搜索\" clearable v-model=\"attachment.keyword\">\n                                <el-button type=\"primary\" slot=\"append\" icon=\"el-icon-search\" @click=\"getList\"></el-button>\n                            </el-input>\n                        </div>\n                        <treeselect\n                            style=\"width: 204px;\"\n                            v-model=\"moveCategoryId\"\n                            :options=\"categoryAllList\"\n                            :normalizer=\"normalizer\"\n                            :show-count=\"true\"\n                            placeholder=\"图片移动至\"\n                        />\n                    </div>\n                    <div class=\"conters mt10\">\n                        <div class=\"gridPic\" v-for=\"(item, index) in list\">\n                            <div @click=\"imageClick(item)\" :class=\"selectIds.indexOf(item.id) > -1?'active':''\">\n                                <el-image \n                                    style=\" width: 100%;height: 100%;display: block;\"\n                                    :src=\"item.url\" />\n                            </div>\n                            <div style=\"display: flex; align-items: center; justify-content: space-between;\">\n                                <p v-if=\"!item.edit\" class=\"name\" style=\"width: 80%;\">{{item.name}}</p>\n                                <el-input v-else v-model=\"item.name\"></el-input>\n                                <i @click=\"editName(index)\" class=\"el-icon-edit\"></i>\n                            </div>\n                            <p class=\"number\"\n                                v-if=\"selectIds.indexOf(item.id) > -1\"\n                            >\n                                <el-badge :value=\"1\" class=\"item\">\n                                    <i class=\"demo-badge\" />\n                                </el-badge>\n                            </p>\n                        </div>\n                        <Pagination :total=\"total\" @pageChange=\"pageChange\" />\n                    </div>\n                </el-col>\n            </el-row>\n        </el-dialog>\n        <el-dialog title=\"添加分类\" :visible.sync=\"dialogCategoryVisible\">\n            <el-form :model=\"categoryForm\" \n                ref=\"categoryFormRef\"\n                :rules=\"categoryRules\" label-width=\"80px\">\n                <el-form-item label=\"上级分类\" prop=\"pid\">\n                    <treeselect\n                        style=\"width: 204px;\"\n                        v-model=\"categoryForm.pid\"\n                        :options=\"categoryAllList\"\n                        :normalizer=\"normalizer\"\n                        :show-count=\"true\"\n                        placeholder=\"请选择上级分类\"\n                    />\n                </el-form-item>\n                <el-form-item label=\"分类名称\" prop=\"name\">\n                    <el-input v-model=\"categoryForm.name\" placeholder=\"请输入分类名称\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"排序\" prop=\"sort\">\n                    <el-input-number v-model=\"categoryForm.sort\" placeholder=\"请输入排序\" />\n                </el-form-item>\n\n                <el-form-item>\n                    <el-button type=\"primary\" @click=\"categorySubmit\" v-throttle=\"2000\">立即创建</el-button>\n                    <el-button @click=\"dialogCategoryVisible = false\">取消</el-button>\n                </el-form-item>\n            </el-form>\n        </el-dialog>\n    </div>\n</template>\n<script>\nimport Treeselect from \"@riophae/vue-treeselect\";\nimport \"@riophae/vue-treeselect/dist/vue-treeselect.css\";\nimport * as attachmentApi from \"@/api/attachment\";\nimport * as categoryApi from \"@/api/attachment/category\";\nimport { confirm } from \"@/utils/message-box.js\";\nimport { getToken } from '@/utils/auth'\nimport SparkMD5 from 'spark-md5'\n\nlet DOMAIN = process.env.VUE_APP_BASE_DOMAIN\nexport default {\n    components: { Treeselect },\n    data() {\n        return {\n            dialogVisible: false,\n            list: [],\n            total: 0,\n            defaultProps: {\n                children: 'children',\n                label: 'name'\n            },\n            selectIds:[],\n            selectUrls:[],\n            categoryList: [],\n            categoryAllList: [],\n            moveCategoryId: null,\n            delDisabled: true,\n            cateSeach: {},\n            attachment: {},\n            dialogCategoryVisible: false,\n            categoryForm: {},\n            categoryRules: {\n                pid: [\n                    { required: true, message: '请选择上级分类', trigger: 'blur' },\n                ],\n                name: [\n                    { required: true, message: '请输入分类名称', trigger: 'blur' },\n                ],\n                sort: [\n                    { required: true, message: '请输入排序', trigger: 'blur' },\n                ],\n            },\n            domain: DOMAIN,\n            headers: {\n                Authorization: \"Bearer \" + getToken()\n            }\n        };\n    },\n    watch:{\n        selectIds:{\n            handler(newVal, oldVal){\n                this.delDisabled = !(newVal.length > 0)\n            },\n            immediate: true,\n            deep: true\n        }\n    },\n    created: function(){\n        this.getCategoryList()\n        this.getCategoryAllList()\n        this.getList()\n    },\n    methods: {\n        getList(){\n            attachmentApi.lists(this.attachment).then(res=>{\n                const { list, total } = res.data\n                this.list = list\n                this.total = total\n            }) \n        },\n        getCategoryList(){\n            categoryApi.lists(this.cateSeach).then(res=>{\n                this.categoryList = res.data\n            })\n        },\n        getCategoryAllList(){\n            categoryApi.allLists().then(res=>{\n                this.categoryAllList = res.data\n            })\n        },\n        editName(index){\n            this.list[index].edit = !this.list[index].edit\n        },\n        imageClick(item){\n            let ids = new Set(this.selectIds)\n                , urls = new Set(this.selectUrls);\n            \n            let fun = function (params, p) {\n                params.has(p)? params.delete(p): params.add(p)\n                return [...params];\n            }\n            this.selectIds = fun(ids, item.id)\n\t\t\tthis.selectUrls = fun(urls, item.url)\n        },\n        normalizer(node) {\n            if (node.children && !node.children.length) {\n                delete node.children;\n            }\n            return {\n                id: node.id,\n                label: node.name,\n                children: node.children\n            };\n        },\n        renderTreeContent(h, { node, data, store }) {\n            let html = \"\"\n            if(data.id > 0){\n                html = <span>\n                    <el-button size=\"mini\" type=\"text\" on-click={ () => this.categoryEdit(data.id) }>编辑</el-button>\n                    <el-button size=\"mini\" type=\"text\" on-click={ () => this.categoryDel (data.id) }>删除</el-button>\n                </span>\n            }\n            return (\n            <span class=\"custom-tree-node\">\n                <span>{data.name}</span>\n                {html}\n            </span>);\n        },\n        cateTreeClick(data){\n            this.attachment.category_id = data.id\n            this.getList()     \n        },\n        categoryEdit(id){\n            categoryApi.edit(id).then(res=>{\n                this.categoryForm = id?res.data: {}\n                this.dialogCategoryVisible = true \n            })\n        },\n        categoryDel(id){\n            confirm(\"是否永久删除该数据？\", ()=>{\n                categoryApi.del(id).then(res=>{\n                    this.$message({\n                        type: 'success',\n                        message: res.msg,\n                    });\n                    this.getCategoryList()\n                })\n            });\n        },\n        categorySubmit(){\n            let that = this\n            let form = that.categoryForm\n            this.$refs.categoryFormRef.validate((valid) => {\n                if (valid) {\n                    let api = form.id? categoryApi.update(form): categoryApi.create(form)\n                    api.then(res=>{\n                        that.categoryForm = res.data\n                        this.getCategoryList()\n                        this.getCategoryAllList()\n                        this.dialogCategoryVisible = false\n                    })\n                } else {\n                    console.log('error submit!!');\n                    return false;\n                }\n            });\n        },\n        fileChange(file){\n            const _this = this  \n            let fileReader = new FileReader()\n            let Spark = new SparkMD5.ArrayBuffer()\n            fileReader.readAsArrayBuffer(file.raw)\n            fileReader.onload = function(e){\n                Spark.append(e.target.result)\n                let md5 = Spark.end()\n\n                _this.$nextTick(_this.fileMd5(file, md5))\n            }\n            return false\n        },\n        fileMd5(file, md5){\n            if(file.status != 'ready') {\n                return false\n            }\n            attachmentApi.fileMd5({\n                md5: md5\n            }).then(res=>{\n                if(res.code === 200){\n                    if(res.data != null){\n                        const { data } = res.data\n                        this.list.push({\n                            name: data.name,\n                            file_storename: res.fileJSON.file_storename\n                        })\n                        this.$refs.upload.handleRemove(file);\n                        return\n                    }else{\n                        this.$refs.upload.submit();\n                    }\n                }\n            })\n        },\n        successUpload(response, file, fileList){\n            console.log(response. file)\n            // this.firmwareData.push({\n            //     file_name: file.name,\n            //     file_storename: response.file_storename\n            // })\n        },\n        pageChange(page){\n            this.queryData()\n            this.page = page\n            this.getList();\n        },\n    }\n};\n</script>\n<style scoped lang=\"scss\">\n.conters{\n    display: flex;\n    flex-wrap: wrap;\n    .gridPic{\n        margin-right: 20px;\n        margin-bottom: 10px;\n        width: 110px;\n        height: 150px;\n        cursor: pointer;\n        position: relative;\n        .active{\n            border: 2px solid #5fb878;\n        }\n\n        .name{\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            color: #515a6e;\n            font-size: 12px;\n        }\n        .number{\n            position: absolute;\n            top: 0;\n            right: 0;\n            margin: 0;\n        }\n        .demo-badge{\n            width: 42px;\n            height: 42px;\n            background: transparent;\n            border-radius: 6px;\n            display: inline-block;\n        }\n        ::v-deep .el-badge__content{\n            position: absolute;\n            transform: translateX(50%);\n            top: -10px;\n            right: 0;\n            height: 20px;\n            border-radius: 10px;\n            min-width: 20px;\n        }\n    }\n}\n::v-deep .custom-tree-node {\n    flex: 1;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    font-size: 14px;\n    padding-right: 8px;\n}\n</style>"]}]}